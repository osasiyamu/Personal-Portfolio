{"ast":null,"code":"'use strict';\n\nexports.parse = function (source, transform) {\n  return new ArrayParser(source, transform).parse();\n};\nclass ArrayParser {\n  constructor(source, transform) {\n    this.source = source;\n    this.transform = transform || identity;\n    this.position = 0;\n    this.entries = [];\n    this.recorded = [];\n    this.dimension = 0;\n  }\n  isEof() {\n    return this.position >= this.source.length;\n  }\n  nextCharacter() {\n    var character = this.source[this.position++];\n    if (character === '\\\\') {\n      return {\n        value: this.source[this.position++],\n        escaped: true\n      };\n    }\n    return {\n      value: character,\n      escaped: false\n    };\n  }\n  record(character) {\n    this.recorded.push(character);\n  }\n  newEntry(includeEmpty) {\n    var entry;\n    if (this.recorded.length > 0 || includeEmpty) {\n      entry = this.recorded.join('');\n      if (entry === 'NULL' && !includeEmpty) {\n        entry = null;\n      }\n      if (entry !== null) entry = this.transform(entry);\n      this.entries.push(entry);\n      this.recorded = [];\n    }\n  }\n  consumeDimensions() {\n    if (this.source[0] === '[') {\n      while (!this.isEof()) {\n        var char = this.nextCharacter();\n        if (char.value === '=') break;\n      }\n    }\n  }\n  parse(nested) {\n    var character, parser, quote;\n    this.consumeDimensions();\n    while (!this.isEof()) {\n      character = this.nextCharacter();\n      if (character.value === '{' && !quote) {\n        this.dimension++;\n        if (this.dimension > 1) {\n          parser = new ArrayParser(this.source.substr(this.position - 1), this.transform);\n          this.entries.push(parser.parse(true));\n          this.position += parser.position - 2;\n        }\n      } else if (character.value === '}' && !quote) {\n        this.dimension--;\n        if (!this.dimension) {\n          this.newEntry();\n          if (nested) return this.entries;\n        }\n      } else if (character.value === '\"' && !character.escaped) {\n        if (quote) this.newEntry(true);\n        quote = !quote;\n      } else if (character.value === ',' && !quote) {\n        this.newEntry();\n      } else {\n        this.record(character.value);\n      }\n    }\n    if (this.dimension !== 0) {\n      throw new Error('array dimension not balanced');\n    }\n    return this.entries;\n  }\n}\nfunction identity(value) {\n  return value;\n}","map":{"version":3,"names":["exports","parse","source","transform","ArrayParser","constructor","identity","position","entries","recorded","dimension","isEof","length","nextCharacter","character","value","escaped","record","push","newEntry","includeEmpty","entry","join","consumeDimensions","char","nested","parser","quote","substr","Error"],"sources":["/Users/cn/Documents/School/SYSC 4907 A/GitHub/personalportfolio/node_modules/postgres-array/index.js"],"sourcesContent":["'use strict'\n\nexports.parse = function (source, transform) {\n  return new ArrayParser(source, transform).parse()\n}\n\nclass ArrayParser {\n  constructor (source, transform) {\n    this.source = source\n    this.transform = transform || identity\n    this.position = 0\n    this.entries = []\n    this.recorded = []\n    this.dimension = 0\n  }\n\n  isEof () {\n    return this.position >= this.source.length\n  }\n\n  nextCharacter () {\n    var character = this.source[this.position++]\n    if (character === '\\\\') {\n      return {\n        value: this.source[this.position++],\n        escaped: true\n      }\n    }\n    return {\n      value: character,\n      escaped: false\n    }\n  }\n\n  record (character) {\n    this.recorded.push(character)\n  }\n\n  newEntry (includeEmpty) {\n    var entry\n    if (this.recorded.length > 0 || includeEmpty) {\n      entry = this.recorded.join('')\n      if (entry === 'NULL' && !includeEmpty) {\n        entry = null\n      }\n      if (entry !== null) entry = this.transform(entry)\n      this.entries.push(entry)\n      this.recorded = []\n    }\n  }\n\n  consumeDimensions () {\n    if (this.source[0] === '[') {\n      while (!this.isEof()) {\n        var char = this.nextCharacter()\n        if (char.value === '=') break\n      }\n    }\n  }\n\n  parse (nested) {\n    var character, parser, quote\n    this.consumeDimensions()\n    while (!this.isEof()) {\n      character = this.nextCharacter()\n      if (character.value === '{' && !quote) {\n        this.dimension++\n        if (this.dimension > 1) {\n          parser = new ArrayParser(this.source.substr(this.position - 1), this.transform)\n          this.entries.push(parser.parse(true))\n          this.position += parser.position - 2\n        }\n      } else if (character.value === '}' && !quote) {\n        this.dimension--\n        if (!this.dimension) {\n          this.newEntry()\n          if (nested) return this.entries\n        }\n      } else if (character.value === '\"' && !character.escaped) {\n        if (quote) this.newEntry(true)\n        quote = !quote\n      } else if (character.value === ',' && !quote) {\n        this.newEntry()\n      } else {\n        this.record(character.value)\n      }\n    }\n    if (this.dimension !== 0) {\n      throw new Error('array dimension not balanced')\n    }\n    return this.entries\n  }\n}\n\nfunction identity (value) {\n  return value\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}